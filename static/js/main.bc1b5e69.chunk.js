(this.webpackJsonpgogumatalk=this.webpackJsonpgogumatalk||[]).push([[0],{37:function(e,t,r){"use strict";(function(e){var a=r(6),n=r(10),c=r(3),s=r.n(c),i=r(4),o=r(5),u=r(9),l=r(2),j=r.n(l),d=r(38),p=r.n(d),b=r(39),m=r(0);t.a=function(t){var r=t.userObj,c=t.setUserObj,d=t.setCreateProjectName,h=Object(l.useState)(!1),f=Object(o.a)(h,2),O=f[0],x=f[1],v=Object(l.useState)(!0),g=Object(o.a)(v,2),N=g[0],w=g[1],_=Object(l.useState)(!0),k=Object(o.a)(_,2),I=k[0],y=k[1],P=Object(l.useState)([]),L=Object(o.a)(P,2),C=L[0],S=L[1],q=Object(l.useState)(""),E=Object(o.a)(q,2),U=E[0],R=E[1],M=Object(l.useState)(""),A=Object(o.a)(M,2),D=A[0],F=A[1],T=Object(l.useState)(""),B=Object(o.a)(T,2),J=B[0],z=B[1],W=Object(l.useState)([0,0]),G=Object(o.a)(W,2),H=G[0],Y=G[1],K=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D||(x((function(e){return!e})),N?setTimeout((function(){w(!1)}),500):setTimeout((function(){y(!1)}),500));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(s.a.mark((function e(t){var i,o,l,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(i=document.querySelector("#description-paper").value)){e.next=17;break}return e.next=5,Object(u.g)({userObj:r,projectName:U,projectImgDataURL:J,memberIdList:[r.userId],description:i});case 5:return o=e.sent,l=[].concat(Object(n.a)(r.projectList),[o]),j=[].concat(Object(n.a)(r.lastEditedProjectList),[{projectPath:{id:o.projectId,name:o.projectName},chatroomPath:""}]),e.next=10,Object(u.q)(r,C,o);case 10:return e.next=12,c(Object(a.a)(Object(a.a)({},r),{},{projectList:l,lastEditedProjectList:j}));case 12:return e.next=14,d({id:o.projectId,name:o.projectName});case 14:alert("\uc131\uacf5\uc801\uc73c\ub85c \ud504\ub85c\uc81d\ud2b8\ub97c \uc0dd\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4"),e.next=18;break;case 17:alert("\ud504\ub85c\uc81d\ud2b8 \uc124\uba85\uc744 \uc801\uc5b4\uc8fc\uc138\uc694");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"createNewProject-container",children:Object(m.jsxs)(p.a,{isFlipped:O,flipDirection:"horizontal",children:[N?Object(m.jsxs)("form",{onSubmit:K,className:"createNewProject-card title-wrapper",children:[Object(m.jsx)("input",{className:"title-input",required:!0,type:"text",onChange:function(t){var r=t.target.value,a=String(r),n=function(t){var r=H,a=e.byteLength(t,"utf8");if(r[0]!==a)switch(a-r[0]){case 3:r=[a,r[1]+2];break;case 1:r=[a,r[1]+1];break;case-1:r=[a,r[1]-1];break;case-3:r=[a,r[1]-2];break;default:alert("\ud55c\uae00\uacfc \uc601\uc5b4\ub9cc \uc785\ub825\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.")}return Y(r),r[1]}(a);a.indexOf(" ")+1?F("\ub744\uc6cc\uc4f0\uae30 \uc5c6\uc774 \uc785\ub825\ud574\uc8fc\uc2ed\uc2dc\uc624"):F(n>14?"\ud55c\uae00\uc740 7\uae00\uc790, \uc601\uc5b4\ub294 14\uae00\uc790\uae4c\uc9c0\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4":""),R(r)},value:U,placeholder:"Enter Project Name"}),D?Object(m.jsx)("span",{className:"title-warn",children:D}):Object(m.jsxs)(j.a.Fragment,{children:[Object(m.jsx)("label",{className:"card-submit__label",htmlFor:"title__submit-btn",children:Object(m.jsx)("i",{className:"bx bx-right-arrow-circle bx-flip-vertical"})}),Object(m.jsx)("input",{className:"card-submit",id:"title__submit-btn",type:"submit",value:"Click to flip"})]})]}):Object(m.jsx)(b.a,{userObj:r,handleClick:K,memberList:C,setMemberList:S}),I?Object(m.jsxs)("form",{onSubmit:K,className:"createNewProject-card projectImg-wrapper",children:[Object(m.jsx)("img",{src:J||"https://firebasestorage.googleapis.com/v0/b/joinmates-7701.appspot.com/o/defaultProjectImg.jpg?alt=media&token=f93b15f0-bd72-4b93-b031-9a5d4631cae9",alt:"Project_img"}),Object(m.jsx)("label",{htmlFor:"newProjectImg",children:"Change Project Image"}),Object(m.jsx)("input",{type:"file",id:"newProjectImg",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){var r=new FileReader;r.onloadend=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.currentTarget.result;case 2:r=e.sent,z(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(t),e.target.value=""}},value:""}),Object(m.jsx)("input",{className:"card-submit",id:"projectImg-btn",type:"submit",value:"Select this image"})]}):Object(m.jsxs)("div",{className:"createNewProject-card description-wrapper",children:[Object(m.jsx)("div",{className:"description-title",children:"Project Description"}),Object(m.jsx)("div",{className:"paper",children:Object(m.jsx)("div",{className:"paper-content",children:Object(m.jsx)("textarea",{id:"description-paper",maxLength:"80",minLength:"10",autoFocus:!0,placeholder:"The maximum number of characters is 80"})})}),Object(m.jsx)("input",{className:"description__submit-btn",type:"submit",onClick:V,value:"create project"})]})]})})}}).call(this,r(55).Buffer)},39:function(e,t,r){"use strict";var a=r(10),n=r(3),c=r.n(n),s=r(4),i=r(5),o=r(9),u=r(2),l=r.n(u),j=r(0);t.a=function(e){var t=e.userObj,r=e.handleClick,n=e.memberList,d=e.setMemberList,p=Object(u.useState)(""),b=Object(i.a)(p,2),m=b[0],h=b[1],f=Object(u.useState)(!1),O=Object(i.a)(f,2),x=O[0],v=O[1],g=Object(u.useState)(null),N=Object(i.a)(g,2),w=N[0],_=N[1],k=Object(u.useState)(""),I=Object(i.a)(k,2),y=I[0],P=I[1],L=Object(u.useRef)(!1),C=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!L.current){e.next=5;break}r(t),e.next=12;break;case 5:return v(!0),a=String(m).toLowerCase(),e.next=9,Object(o.k)(a);case 9:(n=e.sent)?_(n):P("No User Found"),v(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("form",{onSubmit:C,className:"createNewProject-card friends-wrapper",children:[Object(j.jsxs)("div",{className:"friends-title",children:[Object(j.jsx)("span",{children:"Select members"}),Object(j.jsx)("input",{type:"email",value:m,onChange:function(e){var t=e.target.value;v(!1),_(null),P(""),h(t)},placeholder:"Enter members email",id:"friends-title__input-email"}),Object(j.jsx)("label",{htmlFor:"friends-title__input-email",children:Object(j.jsx)("i",{className:"bx bx-search"})})]}),Object(j.jsx)("div",{className:"friends-searchResult",children:x?Object(j.jsxs)("div",{className:"friends-loading",children:[Object(j.jsx)("span",{className:"friends-loading__loader",children:Object(j.jsx)("span",{className:"friends-loading__loader-inner"})}),Object(j.jsx)("span",{className:"friends-loading__title",children:"Searching"})]}):Object(j.jsx)(l.a.Fragment,{children:w?Object(j.jsxs)("div",{className:"friends-searchResult__userInfo",children:[Object(j.jsxs)("div",{className:"friends-searchResult__userInfo-info",children:[Object(j.jsx)("img",{src:w.profileImg,alt:"userImg"}),Object(j.jsxs)("div",{className:"friends-searchResult__userInfo-info-span",children:[Object(j.jsx)("div",{children:w.name}),Object(j.jsx)("span",{children:String(w.email).split("@")[0]}),Object(j.jsxs)("span",{children:["@",String(w.email).split("@")[1]]})]})]}),Object(j.jsx)("input",{type:"button",onClick:function(){if(console.log(n),t.userId===w.userId)alert("\uc774\ubbf8 \ucd94\uac00\ub41c \uc778\uc6d0\uc785\ub2c8\ub2e4");else{for(var e=!1,r=0;r<Array.from(n).length;r++)if(n[r].userId===w.userId){e=!0,alert("\uc774\ubbf8 \ucd94\uac00\ub41c \uc778\uc6d0\uc785\ub2c8\ub2e4");break}e||d([].concat(Object(a.a)(n),[w]))}},value:"Add Member"})]}):Object(j.jsx)("div",{className:"noSearchResult",children:y})})}),Object(j.jsxs)("ul",{className:"friends-memberList-wrapper",children:[Object(j.jsxs)("li",{className:"friends-memberList-memeber",children:[Object(j.jsx)("img",{src:t.photoURL,alt:"img"}),Object(j.jsx)("span",{children:t.userName})]},t.email),n.map((function(e){return Object(j.jsxs)("li",{className:"friends-memberList-memeber",children:[Object(j.jsx)("img",{src:e.profileImg,alt:"img"}),Object(j.jsx)("span",{children:e.name})]},e.email)}))]}),Object(j.jsx)("input",{className:"card-submit",id:"friends-wrapper__card-submit",type:"button",onClick:function(e){L.current=!0,C(e)},value:"Continue"})]})}},59:function(e,t,r){},60:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),c=r(34),s=r.n(c),i=r(3),o=r.n(i),u=r(4),l=r(6),j=r(5),d=r(20),p=r(11),b=r(9),m=r.p+"static/media/Google_icon.4d7d0ca3.png",h=r(0);var f=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(""),s=Object(j.a)(c,2),i=s[0],l=s[1],d=Object(a.useState)(""),p=Object(j.a)(d,2),f=p[0],O=p[1],x=function(){var e=Object(a.useState)("signup"),t=Object(j.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(!0),s=Object(j.a)(c,2),i=s[0],o=s[1];return Object(a.useEffect)((function(){var e=document.getElementById("signup").parentNode.parentNode,t=document.getElementById("login").parentNode,a="slide-up";"login"===r?(t.classList.add(a),e.classList.remove(a),o(!1)):"signup"===r&&(t.classList.remove(a),e.classList.add(a),o(!0))}),[r]),{isLoginPage:i,setPageState:n}}(),v=x.isLoginPage,g=x.setPageState,N=function(e){var t=e.target.id;"signup"===t?(g("login"),document.getElementById("login").classList.remove("opacity0")):"login"===t&&(g("signup"),document.getElementById("login").classList.add("opacity0"))},w=function(e){var t=e.target,r=t.name,a=t.value;"email"===r?n(a):"password"===r?l(a):"userName"===r&&O(a)},_=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(b.d)({newAccount:!v,email:r,password:i,userName:f});case 3:a=e.sent,(n=a.error)&&alert(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(b.s)("google"),(r=t.error)&&alert(r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"form-structor",children:[Object(h.jsx)("h1",{id:"app-name",children:"JoinMates"}),Object(h.jsxs)("form",{onSubmit:_,className:"signup",children:[Object(h.jsxs)("h2",{onClick:N,className:"form-title opacity0",id:"login",children:[Object(h.jsx)("span",{children:"or"}),"Log in"]}),Object(h.jsxs)("div",{className:"form-holder",children:[Object(h.jsx)("input",{required:!0,name:"email",onChange:w,type:"email",className:"input",placeholder:"Email"}),Object(h.jsx)("input",{required:!0,name:"password",onChange:w,type:"password",className:"input",placeholder:"Password"})]}),Object(h.jsx)("input",{value:"Log in",type:"submit",className:"submit-btn"}),Object(h.jsxs)("button",{onClick:k,className:"google_account",children:[Object(h.jsx)("img",{alt:"google_icon",id:"google_icon",src:m}),Object(h.jsx)("span",{id:"google_span",children:v?"Login with Google":"Sign up with Google"})]})]}),Object(h.jsx)("form",{onSubmit:_,className:"login slide-up",children:Object(h.jsxs)("div",{className:"center",children:[Object(h.jsxs)("h2",{onClick:N,className:"form-title",id:"signup",children:[Object(h.jsx)("span",{children:"or"}),"Sign up"]}),Object(h.jsxs)("div",{className:"form-holder",children:[Object(h.jsx)("input",{required:!0,name:"userName",onChange:w,type:"text",maxLength:"15",className:"input",placeholder:"Name"}),Object(h.jsx)("input",{required:!0,name:"email",onChange:w,type:"email",className:"input",placeholder:"Email"}),Object(h.jsx)("input",{required:!0,name:"password",onChange:w,type:"password",className:"input",placeholder:"Password"})]}),Object(h.jsx)("input",{value:"Sign up",type:"submit",className:"submit-btn"}),Object(h.jsxs)("button",{onClick:k,className:"google_account",children:[Object(h.jsx)("img",{alt:"google_icon",id:"google_icon",src:m}),Object(h.jsx)("span",{id:"google_span",children:v?"Login with Google":"Sign up with Google"})]})]})})]})},O=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),r=t[0],n=t[1],c=Object(a.useRef)(!1);return Object(a.useEffect)((function(){c.current?(document.querySelector(".sideBar").classList.toggle("open"),function(e){var t=document.querySelector("#header-btn");e?t.classList.replace("bx-menu","bx-menu-alt-right"):t.classList.replace("bx-menu-alt-right","bx-menu")}(r)):c.current=!0}),[r]),{setNavOpen:n}},x=function(e){var t=e.userObj,r=O().setNavOpen;return Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)("link",{href:"https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css",rel:"stylesheet"}),Object(h.jsxs)("div",{className:"sideBar",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("i",{className:"bx bx-coffee"}),Object(h.jsx)("i",{onClick:function(){return r((function(e){return!e}))},className:"bx bx-menu",id:"header-btn"}),Object(h.jsx)("div",{className:"header-name",children:"JoinMates"})]}),Object(h.jsxs)("ul",{className:"projectList",children:[Object(h.jsx)("li",{className:"nav-list",children:Object(h.jsxs)(d.b,{className:"a-link",to:{pathname:"/project",hash:"#new",state:{fromDashboard:!0}},children:[Object(h.jsx)("i",{className:"bx bx-layer-plus"}),Object(h.jsx)("span",{className:"links-name",id:"create-project-btn",children:"Create Project"})]})}),t.projectList.map((function(e){return Object(h.jsx)("li",{className:"nav-list",children:Object(h.jsxs)(d.b,{className:"a-link",id:e.projectId,name:e.projectName,to:{pathname:"/project/".concat(e.projectId),state:{fromDashboard:!0}},children:[t.setting.seeProjectWithIcon?Object(h.jsx)("i",{className:"bx bxs-component"}):Object(h.jsx)("img",{className:"profile_img",src:e.projectImg,alt:"img"}),Object(h.jsx)("span",{className:"links-name",children:e.projectName})]},e.projectId)},e.projectId)}))]}),Object(h.jsxs)("ul",{className:"footer",children:[Object(h.jsx)("li",{className:"nav-list",children:Object(h.jsxs)(d.b,{className:"a-link",to:"/profile",children:[Object(h.jsx)("i",{className:"bx bx-user"}),Object(h.jsx)("span",{className:"links-name",children:"Profile"})]})}),Object(h.jsx)("li",{className:"nav-list",children:Object(h.jsxs)(d.b,{className:"a-link",to:"/setting",children:[Object(h.jsx)("i",{className:"bx bx-cog"}),Object(h.jsx)("span",{className:"links-name",children:"Setting"})]})})]})]}),Object(h.jsx)("script",{src:"https://kit.fontawesome.com/6478f529f2.js",crossOrigin:"anonymous"})]})},v=function(e){var t=e.setIsUserInfoCard,r=e.setIsJoinProjectCard,a=e.setIsRequestMessageCard,n=function(e){var n=e.target.id,c=document.querySelector("#navi-profile"),s=document.querySelector("#navi-joinProject"),i=document.querySelector("#navi-requestMessage");c.classList.remove("focus"),s.classList.remove("focus"),i.classList.remove("focus"),"navi-profile"===n?(c.classList.add("focus"),a(!1),r(!1),t(!0)):"navi-joinProject"===n?(s.classList.add("focus"),a(!1),t(!1),r(!0)):"navi-requestMessage"===n&&(i.classList.add("focus"),t(!1),r(!1),a(!0))};return Object(h.jsxs)("div",{className:"profileNavigation-wrapper",children:[Object(h.jsx)("div",{className:"profile-navi focus",id:"navi-profile",onClick:n,children:Object(h.jsx)("span",{children:"Profile"})}),Object(h.jsx)("div",{className:"profile-navi",id:"navi-joinProject",onClick:n,children:Object(h.jsx)("span",{children:"Join Project"})}),Object(h.jsx)("div",{className:"profile-navi",id:"navi-requestMessage",onClick:n,children:Object(h.jsx)("span",{children:"Request Messages"})})]})},g=function(e){var t=e.userObj,r=e.setUserObj,c=Object(a.useState)(t.userName),s=Object(j.a)(c,2),i=s[0],d=s[1],p=Object(a.useState)(t.email),m=Object(j.a)(p,2),f=m[0],O=m[1],x=Object(a.useState)(!1),v=Object(j.a)(x,2),g=v[0],N=v[1],w=Object(a.useState)(""),_=Object(j.a)(w,2),k=_[0],I=_[1],y=Object(a.useState)(""),P=Object(j.a)(y,2),L=P[0],C=P[1],S=Object(a.useState)(""),q=Object(j.a)(S,2),E=q[0],U=q[1],R=Object(a.useState)(t.photoURL),M=Object(j.a)(R,2),A=M[0],D=M[1],F=function(e){var t=e.target,r=t.id,a=t.value;"email"===r?O(a):"userName"===r&&d(a)},T=function(e){var t=e.target,r=t.id,a=t.value;"oldPassword"===r?I(a):"newPassword"===r?C(a):"confirmNewPassword"===r&&U(a)},B=function(e){return!!window.confirm("\uc815\ub9d0\ub85c ".concat(e,"\ud558\uae30\ub97c \uc6d0\ud558\uc2ed\ub2c8\uae4c?\n\uc774 \uacfc\uc815\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"))},J=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a.target.files[0])&&((c=new FileReader).onloadend=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.currentTarget.result;case 2:return n=e.sent,e.next=5,Object(b.B)(t,n);case 5:c=e.sent,r(Object(l.a)(Object(l.a)({},t),{},{photoURL:c})),D(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.readAsDataURL(n),a.target.value="");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){N((function(e){return!e})),I(""),C(""),U("")},W=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),L===E){e.next=5;break}alert("\uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638\uac00 \ub2e4\uc2dc\ud655\uc778\ub41c \ube44\ubc00\ubc88\ud638\uc640 \uac19\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"),e.next=8;break;case 5:return e.next=7,Object(b.u)(k,L);case 7:z();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.t)(f);case 2:r(Object(l.a)(Object(l.a)({},t),{},{email:f}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.z)(i);case 2:r(Object(l.a)(Object(l.a)({},t),{},{userName:i}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsxs)("div",{className:"editProfile-wrapper",children:[Object(h.jsxs)("div",{className:"profileImg-wrapper",children:[Object(h.jsx)("img",{src:A,alt:"Profile_img"}),Object(h.jsx)("label",{htmlFor:"uploadImg",children:"Change Profile Image"}),Object(h.jsx)("input",{type:"file",id:"uploadImg",accept:"image/*",onChange:J})]}),Object(h.jsx)(n.a.Fragment,{children:g?Object(h.jsxs)("form",{className:"changePassword",onSubmit:W,children:[Object(h.jsx)("input",{type:"button",onClick:z,value:"Go Back",id:"profile-info__go-back"}),Object(h.jsx)("div",{className:"_label",htmlFor:"oldPassword",children:"Current Password"}),Object(h.jsx)("input",{className:"_input",required:!0,onChange:T,value:k,type:"password",id:"oldPassword"}),Object(h.jsx)("div",{className:"_label",htmlFor:"newPassword",children:"New Password"}),Object(h.jsx)("input",{className:"_input",required:!0,onChange:T,value:L,type:"password",id:"newPassword"}),Object(h.jsx)("div",{className:"_label",htmlFor:"confirmNewPassword",children:"Confirm New Password"}),Object(h.jsx)("input",{className:"_input",required:!0,onChange:T,value:E,type:"password",id:"confirmNewPassword"}),Object(h.jsx)("input",{className:"_input _btn",type:"submit",id:"changePasswordBtn",value:"Change Password"})]}):Object(h.jsxs)("form",{className:"profile-info",children:[Object(h.jsx)("input",{className:"hidden_input",value:"Update",id:"userName_btn",type:"button",onClick:H}),Object(h.jsx)("div",{className:"_label",htmlFor:"userName",children:"Name"}),Object(h.jsx)("input",{className:"_input",required:!0,type:"text",onChange:F,id:"userName",value:i}),Object(h.jsx)("div",{className:"_label",htmlFor:"email",children:"Email"}),Object(h.jsx)("input",{className:"_input",required:!0,type:"email",onChange:F,id:"email",value:f}),Object(h.jsx)("input",{className:"hidden_input",value:"Update",id:"email_btn",type:"button",onClick:G}),Object(h.jsx)("div",{className:"_label",htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{className:"_input _btn",required:!0,type:"button",onClick:z,value:"Change Password"})]})})]}),Object(h.jsxs)("div",{className:"logOut-wrapper",children:[Object(h.jsx)("input",{type:"button",onClick:function(e){e.preventDefault(),B("\ub85c\uadf8\uc544\uc6c3")&&Object(b.r)()},value:"Log Out"}),Object(h.jsx)("input",{type:"button",onClick:function(e){e.preventDefault(),B("\ud0c8\ud1f4")&&Object(b.h)()},value:"Delete Account"})]})]})},N=function(e){var t=e.userObj,r=e.setUserObj,c=Object(a.useState)(!0),s=Object(j.a)(c,2),i=s[0],d=s[1],p=Object(a.useState)(!0),m=Object(j.a)(p,2),f=m[0],O=m[1],x=Object(a.useState)(null),v=Object(j.a)(x,2),g=v[0],N=v[1],w=Object(a.useState)(""),_=Object(j.a)(w,2),k=_[0],I=_[1],y=Object(a.useState)(""),P=Object(j.a)(y,2),L=P[0],C=P[1],S=Object(a.useState)(0),q=Object(j.a)(S,2),E=q[0],U=q[1],R=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),L){e.next=10;break}return document.querySelector(".enterJoinProject-wrapper").classList.add("joinProject__fade-out"),setTimeout((function(){d(!1)}),350),e.next=7,Object(b.j)(k);case 7:(r=e.sent)&&N(r),O(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){for(var e=Array.from(t.projectList),r=0;r<e.length;r++)if(g[E].id===e[r].projectId)return!1;return!0},A=function(){var e=Object(u.a)(o.a.mark((function e(){var a,n,c,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g[E].id,!M()){e.next=17;break}for(n=Array.from(t.requestMessages),c=!0,s=[],i=0;i<n.length;i++)a===n[i].projectId?"reject"===n[i].state?(u=window.confirm("\uac70\uc808\ub41c \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4\n\uc7ac\uc2e0\uccad \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),c=!!u):c=!1:s.push(n[i]);if(!c){e.next=14;break}return e.next=9,Object(b.b)(a,t);case 9:s.push({projectName:g[E].name,projectId:g[E].id,projectImg:g[E].projectImg,leader:g[E].leader,requestDate:Date.now(),state:"pending"}),r(Object(l.a)(Object(l.a)({},t),{},{requestMessages:s})),alert("\uc131\uacf5\uc801\uc73c\ub85c \uc694\uccad \uba54\uc138\uc9c0\ub97c \uc804\uc1a1\ud558\uc600\uc2b5\ub2c8\ub2e4"),e.next=15;break;case 14:alert("\uc774\ubbf8 \uc694\uccad\ub41c \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4");case 15:e.next=18;break;case 17:alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uc774\uac70\ub098 \uc694\uccad\ub41c \ud504\ub85c\uc81d\ud2b8\uc785\ub2c8\ub2e4");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=e.target.classList;"joinProject__swift-right"===t.value?U((function(e){return e+1})):"joinProject__swift-left"===t.value&&U((function(e){return e-1}))};return Object(h.jsx)("div",{className:"joinProject-wrapper",children:i?Object(h.jsxs)("form",{onSubmit:R,className:"enterJoinProject-wrapper",children:[Object(h.jsx)("input",{type:"text",className:"enterJoinProject__input",placeholder:"Enter Project Name",onChange:function(e){var t=e.target.value;String(t).indexOf(" ")+1?C("\ub744\uc6cc\uc4f0\uae30 \uc5c6\uc774 \uc785\ub825\ud574\uc8fc\uc2ed\uc2dc\uc624"):C(""),I(t)},value:k}),L?Object(h.jsx)("span",{className:"enterJoinProject__title-warn",children:L}):Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)("label",{className:"enterJoinProject__label",htmlFor:"enterJoinProject__submit-btn",children:Object(h.jsx)("i",{className:"bx bx-right-arrow-circle bx-flip-vertical"})}),Object(h.jsx)("input",{className:"enterJoinProject__submit",id:"enterJoinProject__submit-btn",type:"submit",value:""})]})]}):Object(h.jsx)(n.a.Fragment,{children:f?Object(h.jsxs)("div",{className:"loading-container",children:[Object(h.jsx)("div",{className:"loading"}),Object(h.jsx)("div",{id:"loading-text",children:"Searching"})]}):Object(h.jsx)(n.a.Fragment,{children:g?Object(h.jsxs)("div",{className:"joinProject-project-wrapper",children:[Object(h.jsxs)("div",{className:"joinProject-project__img-wrapper",children:[Object(h.jsx)("img",{src:g[E].projectImg,alt:"project_img"}),Object(h.jsx)("div",{children:g[E].name})]}),Object(h.jsxs)("div",{className:"joinProject-project__info-wrapper",children:[Object(h.jsxs)("div",{className:"info-leader-wrapper",children:[Object(h.jsx)("div",{className:"info-leader__img-wrapper",children:Object(h.jsx)("img",{src:g[E].leader.profileImg,alt:"img"})}),Object(h.jsxs)("div",{className:"info-leader__info",children:[Object(h.jsx)("span",{className:"info-leader__info-name",children:g[E].leader.name}),Object(h.jsx)("span",{className:"info-leader__info-email",children:g[E].leader.email})]})]}),Object(h.jsxs)("div",{className:"info-description",children:[Object(h.jsx)("span",{children:"Project Description"}),Object(h.jsx)("div",{children:g[E].description})]}),Object(h.jsx)("input",{id:"joinProject-btn",type:"button",value:"Join Project",onClick:A})]}),Boolean(g[E+1])&&Object(h.jsxs)("div",{onClick:D,className:"joinProject__swift-right",children:[Object(h.jsx)("div",{className:"joinProject__swift-description-right",children:"Next"}),Object(h.jsx)("div",{className:"swift-arrow swift-right"})]}),E>0&&Boolean(g[E-1])&&Object(h.jsxs)("div",{onClick:D,className:"joinProject__swift-left",children:[Object(h.jsx)("div",{className:"swift-arrow swift-left"}),Object(h.jsx)("div",{className:"joinProject__swift-description-left",children:"Previous"})]})]}):Object(h.jsxs)("div",{className:"joinProject-noProject-wrapper",children:[Object(h.jsx)("span",{children:"No Project Found"}),Object(h.jsx)("input",{type:"button",value:"Go Back",onClick:function(){N(null),I(""),C(""),U(0),d(!0),O(!0)}})]})})})})},w=function(e){var t=e.userObj,r=e.setUserObj,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],d=s[1];Object(a.useEffect)((function(){var e=!1,a=Array.from(t.requestMessages);console.log(a);for(var n=[],c=0;c<a.length;c++)if("reject"===a[c].state){var s=a[c].requestDate;Date.now()-s<6048e5?n.push(a[c]):e=!0}else"fulfilled"===a[c].state?e=!0:n.push(a[c]);console.log(e),console.log(n),e&&r(Object(l.a)(Object(l.a)({},t),{},{requestMessages:n})),n.length?(console.log(n),d(n)):d(null)}),[t,r]);var p=function(e){var t=new Date(Number(e)),r=String(t.getFullYear()).slice(2),a=String(t.getMonth()+1);1===a.length&&(a="0".concat(a));var n=String(t.getDate());return 1===n.length&&(n="0".concat(n)),"".concat(r,":").concat(a,":").concat(n)},m=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,c,s,u,j,p,m,h,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.name,e.next=3,Object(b.c)(n,t.userId);case 3:for(c=e.sent,s=c.chatroom,u=c.projectInfo,(j=Array.from(t.projectList)).push(u),(p=Array.from(t.lastEditedProjectList)).push({chatroomPath:s,projectPath:{id:u.projectId,name:u.projectName}}),m=Array.from(i),h=[],f=0;f<m.length;f++)m[f].projectId!==n&&h.push(m[f]);r(Object(l.a)(Object(l.a)({},t),{},{lastEditedProjectList:p,projectList:j,requestMessages:h})),d(h);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){for(var a=e.target.name,n=Array.from(i),c=[],s=0;s<n.length;s++)n[s].projectId!==a&&c.push(n[s]);r(Object(l.a)(Object(l.a)({},t),{},{requestMessages:c})),d(c)};return Object(h.jsx)("div",{className:"requestCard-wrapper",children:i?Object(h.jsxs)("ul",{className:"requestCard__list-wrapper",children:[Object(h.jsx)("li",{className:"requestCard-warn",children:"\uac70\ubd80\ub41c \uba54\uc138\uc9c0\ub294 7\uc77c \ud6c4\uc5d0 \uc790\ub3d9\uc73c\ub85c \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),i.map((function(e){return Object(h.jsxs)("li",{className:"request-wrapper",children:[Object(h.jsx)("div",{className:"request-wrapper__marked"}),Object(h.jsx)("div",{className:"request-time__wrapper",children:Object(h.jsx)("span",{children:p(e.requestDate)})}),Object(h.jsxs)("div",{className:"request-project__wrapper",children:[Object(h.jsx)("div",{className:"request-project__img-wrapper",children:Object(h.jsx)("img",{src:e.projectImg,alt:"img"})}),Object(h.jsxs)("div",{className:"request-project__info-wrapper",children:[Object(h.jsx)("div",{className:"request-project__info-title",children:e.projectName}),Object(h.jsxs)("div",{className:"request-project__info-leader-wrapper",children:[Object(h.jsx)("i",{className:"bx bxs-crown"}),Object(h.jsx)("div",{className:"leader-img__wrapper",children:Object(h.jsx)("img",{src:e.leader.profileImg,alt:"img"})}),Object(h.jsx)("div",{className:"leader-name",children:e.leader.name})]})]})]}),"pending"===e.state||"resolve"===e.state?Object(h.jsx)(n.a.Fragment,{children:"pending"===e.state?Object(h.jsx)("div",{className:"request-state__wrapper",children:Object(h.jsx)("span",{children:"\ub300\uae30\uc911"})}):Object(h.jsxs)("div",{className:"request-state__wrapper state-resolve",children:[Object(h.jsx)("span",{children:"\uc2b9\uc778"}),Object(h.jsx)("input",{type:"button",className:"request-state__btn",value:"Join",name:e.projectId,onClick:m})]})}):Object(h.jsx)(n.a.Fragment,{children:"request"===e.state?Object(h.jsxs)("div",{className:"request-state__wrapper state-request",children:[Object(h.jsx)("span",{children:"\uc694\uccad"}),Object(h.jsx)("input",{name:e.projectId,onClick:m,type:"button",className:"request-state__btn",value:"Join"}),Object(h.jsx)("input",{name:e.projectId,onClick:f,type:"button",className:"request-state__btn",value:"Reject"})]}):Object(h.jsx)("div",{className:"request-state__wrapper",children:Object(h.jsx)("span",{children:"\uac70\ubd80"})})})]},e.projectId)}))]}):Object(h.jsx)("div",{className:"requestCard__no-message",children:Object(h.jsx)("span",{children:"No Messages"})})})},_=function(e){var t=e.userObj,r=e.setUserObj,n=Object(a.useState)(!0),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!1),u=Object(j.a)(o,2),l=u[0],d=u[1],p=Object(a.useState)(!1),b=Object(j.a)(p,2),m=b[0],f=b[1];return Object(h.jsx)("div",{className:"profile-container",children:Object(h.jsxs)("div",{className:"profile-wrapper",children:[Object(h.jsx)(v,{setIsUserInfoCard:i,setIsJoinProjectCard:d,setIsRequestMessageCard:f}),s&&Object(h.jsx)(g,{userObj:t,setUserObj:r}),l&&Object(h.jsx)(N,{userObj:t,setUserObj:r}),m&&Object(h.jsx)(w,{userObj:t,setUserObj:r})]})})},k=function(e){var t=function(e,t){var r=Object(a.useState)(e.setting.seeProjectWithIcon),n=Object(j.a)(r,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){var r=e.setting;c!==r.seeProjectWithIcon&&t(Object(l.a)(Object(l.a)({},e),{},{setting:Object(l.a)(Object(l.a)({},r),{},{seeProjectWithIcon:c})})),document.getElementById("naviIconSwitch").checked=!c}),[c,e,t]),s}(e.userObj,e.setUserObj);return Object(h.jsx)("div",{className:"setting-container",children:Object(h.jsx)("div",{className:"setting-wrapper",children:Object(h.jsxs)("div",{className:"setting-box naviIconChanger",children:[Object(h.jsx)("div",{className:"setting-box__title",children:"See project preview with"}),Object(h.jsxs)("div",{className:"checkbox-wrapper",children:[Object(h.jsx)("input",{type:"checkbox",id:"naviIconSwitch",onClick:function(e){"naviIconSwitch"===e.target.id&&t((function(e){return!e}))}}),Object(h.jsxs)("div",{className:"checkbox-inner",children:[Object(h.jsx)("label",{htmlFor:"naviIconSwitch"}),Object(h.jsx)("span",{})]}),Object(h.jsx)("div",{className:"checkbox__left",children:"Icon"}),Object(h.jsx)("div",{className:"checkbox__right",children:"Image"})]})]})})})},I=function(e){var t=new Date(Number(e)),r=t.getHours(),a=t.getMinutes();a<10&&(a="0".concat(a));var n=r<12;return"".concat(n?r:r-12,":").concat(a).concat(n?"am":"pm")},y=function(e){var t=e.userObj,r=(e.projectObj,e.projectPath),n=e.chatroomPath,c=Object(a.useState)(""),s=Object(j.a)(c,2),i=s[0],d=s[1],p=Object(a.useState)([]),m=Object(j.a)(p,2),f=m[0],O=m[1],x=Object(a.useRef)(!1),v=Object(a.useRef)(!0),g=Object(a.useRef)(null),N=Object(a.useRef)({isUpdateChatList:!0,limit:10,times:1});Object(a.useEffect)((function(){var e=function(e){var r=e.target.scrollTop;if(0===r)console.count("at the top"),N.current=Object(l.a)(Object(l.a)({},N.current),{},{times:N.current.times+1,isUpdateChatList:!0}),v.current=!1,t();else{var a=e.target.offsetHeight;r<e.target.scrollHeight-1.5*a?(v.current=!1,console.log("create chat bottom")):v.current=!0}},t=function(){var e;N.current.isUpdateChatList&&(console.log("getChatList"),g.current&&g.current(),e=N.current.times,g.current=Object(b.l)({path:{projectPath:r,chatroomPath:n},setFunc:O,limit:10*e}),N.current.isUpdateChatList=!1)};x.current||(N.current={isUpdateChatList:!0,limit:10,times:1},d(""),g.current&&g.current(),v.current=!0,t());var a=document.querySelector(".chat__body");return a.addEventListener("scroll",e),function(){return a.removeEventListener("scroll",e)}}),[r,n]),Object(a.useEffect)((function(){var e=document.querySelector(".chat__body");v.current&&(e.scrollTop=e.scrollHeight)}),[f]);var w=function(e){e&&e.preventDefault(),Object(b.e)({path:{projectPath:r,chatroomPath:n},userObj:t,chat:i}),d("")},_=function(){var e=Object(u.a)(o.a.mark((function e(a){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=a.target.files[0])&&((s=new FileReader).onloadend=function(){var e=Object(u.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.currentTarget.result;case 2:c=e.sent,Object(b.e)({path:{projectPath:r,chatroomPath:n},userObj:t,chatType:"img",chat:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsDataURL(c),a.target.value="");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"chat-wrapper",children:[Object(h.jsxs)("div",{className:"chat__header",children:[Object(h.jsx)("div",{className:"chat__header-title",children:Object(h.jsxs)("span",{children:["#",n.name]})}),Object(h.jsxs)("div",{className:"chat__header-additional",children:[Object(h.jsxs)("div",{className:"chat__header-search",children:[Object(h.jsx)("i",{className:"bx bx-search"}),Object(h.jsx)("input",{type:"text",placeholder:"Search"})]}),Object(h.jsx)("div",{className:"chat__header-more",children:Object(h.jsx)("i",{className:"bx bx-dots-vertical-rounded"})})]})]}),Object(h.jsx)("ul",{className:"chat__body",children:f.map((function(e){return Object(h.jsxs)("li",{className:t.userId===e.createrObj.createrId?"owner chat-msg":"chat-msg",children:[Object(h.jsxs)("div",{className:"chat-msg-profile",children:[Object(h.jsx)("img",{className:"chat-msg-img",src:e.createrObj.createrProfileImg,alt:"profile_img"}),Object(h.jsx)("div",{className:"chat-msg-date",children:I(e.createTime)})]}),Object(h.jsx)("div",{className:"chat-msg-content",children:"text"===e.chatType?Object(h.jsx)("div",{className:"chat-msg-text",children:e.doc}):Object(h.jsx)("div",{className:"chat-msg-text",children:Object(h.jsx)("img",{src:e.doc,alt:"img"})})})]},e.createTime)}))}),Object(h.jsxs)("div",{className:"chat__enter",children:[Object(h.jsxs)("div",{className:"chat__enter-option main-option chat__enter-addFile",children:[Object(h.jsx)("label",{htmlFor:"uploadChatImg",children:Object(h.jsx)("i",{className:"bx bxs-image-add"})}),Object(h.jsx)("input",{type:"file",id:"uploadChatImg",accept:"image/*",onChange:_})]}),Object(h.jsx)("form",{onSubmit:w,className:"chat__enter-input",children:Object(h.jsx)("input",{placeholder:"Type a message...",value:i,onChange:function(e){var t=e.target.value;d(t)},type:"text"})}),Object(h.jsx)("div",{onClick:w,className:"chat__enter-option sub-option chat__enter-submit",children:Object(h.jsx)("i",{className:"bx bxs-message-alt-add"})})]})]})},P=function(e){var t=e.userObj,r=e.setUserObj,n=e.projectObj,c=e.projectPath,s=e.setChatroomPath,i=e.setEditProjectInfo,p=Object(a.useState)(!1),m=Object(j.a)(p,2),f=m[0],O=m[1],x=Object(a.useState)(!1),v=Object(j.a)(x,2),g=v[0],N=v[1],w=Object(a.useState)(""),_=Object(j.a)(w,2),k=_[0],I=_[1],y=Object(a.useState)(""),P=Object(j.a)(y,2),L=P[0],C=P[1],S=function(e){var t=e.target.id;"chatList__title-members-add"===t?O((function(e){return!e})):"chatList__title-channels-add"===t&&N((function(e){return!e}))},q=function(){var e=Object(u.a)(o.a.mark((function e(a){var i,u,j,d,p,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),"add-members"!==(i=a.target.name)){e.next=17;break}return console.log(k),e.next=6,Object(b.k)(k);case 6:if(!(u=e.sent)){e.next=13;break}return e.next=10,Object(b.b)(n.projectInfo.projectId,{userId:u.userId,userName:u.name,photoURL:u.profileImg,email:u.email});case 10:alert("\uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4\n\ub9ac\ub354\uc758 \uc2b9\uc778 \ud6c4 \uc720\uc800\uac00 \ucd94\uac00\ub429\ub2c8\ub2e4"),e.next=14;break;case 13:alert("\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc720\uc800\uc785\ub2c8\ub2e4");case 14:O(!1),e.next=27;break;case 17:if("add-channels"!==i){e.next=27;break}return e.next=20,Object(b.f)({userObj:t,path:{projectPath:c,chatroomPath:{id:void 0,name:L}}});case 20:for(j=e.sent,d={id:j,name:L},p=t.lastEditedProjectList,m=0;m<p.length;m++)p[m].projectPath.name===c.name&&(p[m].chatroomPath=d,r(Object(l.a)(Object(l.a)({},t),{},{lastEditedProjectList:p})));N(!1),s(d),C("");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.target,r=t.id,a=t.value;"chatList__add-members"===r?I(a):"chatList__add-channels"===r&&C(a)};return Object(h.jsxs)("div",{className:"chatList-wrapper",children:[Object(h.jsxs)("div",{className:"chatList-userInfo",children:[Object(h.jsx)("div",{className:"chatList-userInfo__img-wrapper",children:Object(h.jsx)("img",{className:"profile_img lg2",src:t.photoURL,alt:"img"})}),Object(h.jsxs)("div",{className:"chatList-userInfo__info",children:[Object(h.jsx)("div",{className:"chatList-userInfo__info-name",children:t.userName}),Object(h.jsx)("div",{className:"chatList-userInfo__info-email",children:t.email})]})]}),n.leaderId===t.userId&&Object(h.jsxs)("div",{className:"chatList-components change-project__wrapper",onClick:function(){i((function(e){return!e}))},children:[Object(h.jsx)("i",{className:"bx bxs-crown"}),Object(h.jsx)("div",{className:"change-project__title",children:"Edit Project"})]}),Object(h.jsxs)("div",{className:"chatList-components chatList-members",children:[Object(h.jsxs)("div",{className:"chatList__title",children:[Object(h.jsx)("i",{className:"bx bxs-down-arrow"}),Object(h.jsx)("div",{className:"chatList__title-title",children:"Members"}),f?Object(h.jsx)("i",{id:"chatList__title-members-add",onClick:S,className:"bx bx-arrow-back"}):Object(h.jsx)("i",{id:"chatList__title-members-add",onClick:S,className:"bx bxs-user-plus"})]}),f?Object(h.jsxs)("form",{onSubmit:q,name:"add-members",className:"chatList__add",children:[Object(h.jsx)("span",{children:"Enter member's email"}),Object(h.jsx)("input",{type:"email",placeholder:"Enter member's email",id:"chatList__add-members",onChange:E,value:k}),Object(h.jsx)("input",{type:"submit",value:"Add member"})]}):Object(h.jsx)("ul",{className:" chatList__list-wrapper",children:n.userObjList.map((function(e){return Object(h.jsxs)("li",{className:"chatList__list",children:[Object(h.jsx)("img",{src:e.profileImg,alt:"img"}),Object(h.jsx)("span",{className:"chatList__list-title",children:e.name})]},e.userId)}))})]}),Object(h.jsxs)("div",{className:"chatList-components chatList-channels",children:[Object(h.jsxs)("div",{className:"chatList__title",children:[Object(h.jsx)("i",{className:"bx bxs-down-arrow"}),Object(h.jsx)("div",{className:" chatList__title-title",children:"Channels"}),g?Object(h.jsx)("i",{id:"chatList__title-channels-add",onClick:S,className:"bx bx-arrow-back"}):Object(h.jsx)("i",{id:"chatList__title-channels-add",onClick:S,className:"bx bxs-plus-square"})]}),g?Object(h.jsxs)("form",{onSubmit:q,name:"add-channels",className:"chatList__add",children:[Object(h.jsx)("span",{children:"Create New channel"}),Object(h.jsx)("input",{type:"text",placeholder:"Enter channel name",id:"chatList__add-channels",onChange:E,value:L}),Object(h.jsx)("input",{type:"submit",value:"create channel"})]}):Object(h.jsx)("ul",{className:"chatList__list-wrapper",children:n.chatList.map((function(e){return Object(h.jsx)("li",{className:"chatList__list",children:Object(h.jsxs)(d.b,{className:"chatList__list-link",name:e.name,to:{pathname:"/project/".concat(n.projectInfo.projectId),hash:"#".concat(e.id,"==").concat(e.name),state:{fromDashboard:!0}},children:[Object(h.jsx)("span",{className:"chatList__list-hash",children:"#"}),Object(h.jsx)("span",{className:"chatList__list-title",children:e.name})]},e.id)},e.id)}))})]})]})},L=function(e){var t=e.userObj,r=e.setUserObj,n=e.projectPath,c=e.setChatroomPath,s=Object(a.useState)(""),i=Object(j.a)(s,2),d=i[0],p=i[1],m=function(){var e=Object(u.a)(o.a.mark((function e(a){var s,i,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,Object(b.f)({userObj:t,path:{projectPath:n,chatroomPath:{id:void 0,name:d}}});case 3:for(s=e.sent,i={id:s,name:d},u=t.lastEditedProjectList,j=0;j<u.length;j++)u[j].projectPath.name===n.name&&(u[j].chatroomPath=i,r(Object(l.a)(Object(l.a)({},t),{},{lastEditedProjectList:u})));c(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"createNewChatroom-container",children:Object(h.jsxs)("form",{className:"createNewChatroom-wrapper",onSubmit:m,children:[Object(h.jsx)("input",{type:"text",placeholder:"Enter channel name",onChange:function(e){var t=e.target.value;p(t)},value:d}),Object(h.jsx)("input",{type:"submit",value:"create channel"})]})})},C=r(10),S=function(e){var t=e.projectObj,r=Object(a.useState)({list:Array.from(t.chatList)}),n=Object(j.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)([]),l=Object(j.a)(i,2),d=l[0],p=l[1],m=Object(a.useState)(!0),f=Object(j.a)(m,2),O=f[0],x=f[1],v=function(e,t,r,a){"bx bxs-edit"===t?(e.classList.value="bx bxs-left-arrow-square",r.style.pointerEvents="all",r.style.borderBottom="1px solid rgba(0,0,0,1)",r.style.opacity=1,a.style.opacity=1,a.style.pointerEvents="all"):(e.classList.value="bx bxs-edit",r.style.opacity=0,r.style.pointerEvents="none",a.style.opacity=0,a.style.pointerEvents="none")},g=function(e){var t=e.target.classList.value,r=e.target.parentNode.parentNode,a=r.childNodes[1].childNodes[1],n=r.childNodes[1].childNodes[2];v(e.target,t,a,n)},N=function(e){for(var t=Array.from(c.list),r=0;r<t.length;r++)if(t[r].name===e)return r;return-1},w=function(){var e=Object(u.a)(o.a.mark((function e(r,a){var n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=N(r))+1)){e.next=9;break}return(i=c.list)[n].name=a,s({list:i}),e.next=7,Object(b.v)(t.projectInfo.projectId,i);case 7:e.next=10;break;case 9:alert("\uc5d0\ub7ec: \ucc44\ub110 \uc774\ub984\uc744 \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4");case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),_=function(e){e.preventDefault();var r=e.target.parentNode,a=String(r.id).slice("channel==".length),n=e.target.childNodes[1].value;if(function(e){for(var r=Array.from(t.chatList),a=0;a<r.length;a++)if(r[a].name===e)return!0;return!1}(n))alert("\uc911\ubcf5\ub41c \ucc44\ub110\uba85\uc785\ub2c8\ub2e4");else{var c=r.childNodes[2].childNodes[0],s=c.classList.value;w(a,n),v(c,s,e.target[0],e.target[1])}},k=function(e){var t=e.target.htmlFor;if(t){var r=String(t).split("==")[1];if(d.indexOf(r)+1){for(var a=[],n=0;n<Array.from(d).length;n++)d[n]!==r&&(a=[].concat(Object(C.a)(a),[d[n]]));p(a)}else{var c=[].concat(Object(C.a)(Array.from(d)),[r]);p(c)}}},I=function(){var e=Object(u.a)(o.a.mark((function e(){var r,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.length){e.next=13;break}for(r="",a=0;a<Array.from(d).length;a++)r+="".concat(d[a],", ");if(!window.confirm("".concat(r," \ucc44\ub110\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4\n\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))){e.next=11;break}return x(!1),e.next=8,Object(b.i)(t.projectInfo.projectId,d,x);case 8:n=e.sent,console.log(n),s(n);case 11:e.next=14;break;case 13:alert("\uc0ad\uc81c\ud560 \ucc44\ub110\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"editChannelCard-wrapper",children:[Object(h.jsxs)("div",{className:"editChannelCard__title-wrapper",children:[Object(h.jsx)("div",{className:"editChannelCard__title-icon-wrapper",children:Object(h.jsx)("i",{className:"bx bx-chat"})}),Object(h.jsx)("span",{children:"Channel List"}),Object(h.jsx)("i",{className:"bx bx-trash",onClick:I})]}),c.list.length?Object(h.jsx)("ul",{className:"editChannelCard__editChannelList-wrapper",children:c.list.map((function(e){return Object(h.jsxs)("li",{id:"channel=="+e.name,className:"editChannel-wrapper",children:[Object(h.jsx)("div",{className:"editChannel__checkbox-wrapper",children:Object(h.jsxs)("div",{className:"checkBox",onClick:k,children:[Object(h.jsx)("input",{type:"checkbox",className:"checkBox-input",id:"checkBox=="+e.name}),Object(h.jsx)("label",{htmlFor:"checkBox=="+e.name})]})}),Object(h.jsxs)("form",{onSubmit:_,className:"editChannel__info-wrapper",children:[Object(h.jsx)("span",{id:"chanTitle",children:e.name}),Object(h.jsx)("input",{type:"text",placeholder:e.name}),Object(h.jsx)("button",{children:"Change"})]}),Object(h.jsx)("div",{className:"editChannel__changeIcon-wrapper",children:Object(h.jsx)("i",{onClick:g,className:"bx bxs-edit"})})]},e.id)}))}):Object(h.jsx)("div",{className:"editChannelCard__noChannel-wrapper",children:"No Channel"}),!O&&Object(h.jsx)("div",{className:"editChannelCard__deleting",children:Object(h.jsx)("div",{className:"editChannelCard__noChannel-wrapper",children:"Deleting..."})})]})},q=function(e){var t=e.projectObj,r=Object(a.useState)(t.userObjList),n=Object(j.a)(r,2),c=n[0],s=(n[1],Object(a.useState)(null)),i=Object(j.a)(s,2),o=i[0],u=i[1];return Object(h.jsxs)("div",{className:"editMember-wrapper",children:[Object(h.jsxs)("div",{className:"editMember-listwrapper",children:[Object(h.jsx)("div",{className:"editMember-title",children:"Members"}),Object(h.jsx)("ul",{className:"editMember__memberList",children:c.map((function(e,t){return Object(h.jsxs)("li",{onClick:function(){return u(e)},className:"editMember__member",children:[Object(h.jsx)("div",{className:"editMember__member-index",children:t+1}),Object(h.jsxs)("div",{className:"editMember__info-wrapper",children:[Object(h.jsx)("span",{className:"editMember__info-name",children:e.name}),Object(h.jsx)("span",{className:"editMember__info-email",children:e.email})]})]},t)}))})]}),Object(h.jsx)("div",{className:"editMember__memberCard-container",children:o?Object(h.jsxs)("div",{className:"memberCard-wrapper",children:[Object(h.jsx)("div",{className:"memberCard__img-wrapper",children:Object(h.jsx)("img",{src:o.profileImg,alt:"img"})}),Object(h.jsxs)("div",{className:"memberCard__info",children:[Object(h.jsx)("span",{className:"memberCard__info-name",children:o.name}),Object(h.jsx)("span",{className:"memberCard__info-email",children:o.email})]}),Object(h.jsx)("input",{type:"button",value:"Release"})]}):Object(h.jsx)("div",{className:"empty-memberCard",children:"Select Member"})})]})},E=function(e){var t=e.projectObj,r=Object(a.useState)(t.projectInfo.projectImg),n=Object(j.a)(r,2),c=n[0],s=n[1],i=Object(a.useState)(t.projectInfo.projectName),l=Object(j.a)(i,2),d=l[0],p=l[1],m=Object(a.useState)(t.description),f=Object(j.a)(m,2),O=f[0],x=f[1],v=function(e){var t=e.target,r=t.id,a=t.value;"projectName"===r?p(a):"editProject__description"===r&&x(a)},g=function(){var e=Object(u.a)(o.a.mark((function e(r){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=r.target.files[0])&&((n=new FileReader).onloadend=function(){var e=Object(u.a)(o.a.mark((function e(r){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.currentTarget.result;case 2:return a=e.sent,e.next=5,Object(b.x)(t.projectInfo.projectId,a);case 5:n=e.sent,console.log(n),n&&s(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsDataURL(a),r.target.value="");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"editProject-wrapper",children:[Object(h.jsxs)("div",{className:"editprojectImg-wrapper",children:[Object(h.jsx)("img",{src:c,alt:"project_img"}),Object(h.jsx)("label",{htmlFor:"uploadImg",children:"Change Project Image"}),Object(h.jsx)("input",{type:"file",id:"uploadImg",accept:"image/*",onChange:g})]}),Object(h.jsxs)("div",{className:"editProject-info",children:[Object(h.jsx)("input",{className:"hidden_input editProject-name btn-x",value:"Update",type:"button",onClick:function(){Object(b.y)(t.projectInfo.projectId,d)}}),Object(h.jsx)("label",{className:"_label editProject-name",htmlFor:"projectName",children:"Name"}),Object(h.jsx)("input",{className:"_input",required:!0,type:"text",onChange:v,id:"projectName",value:d}),Object(h.jsx)("label",{className:"_label editProject-description",htmlFor:"editProject__description",children:"Description"}),Object(h.jsx)("textarea",{className:"_input",onChange:v,id:"editProject__description",value:O}),Object(h.jsx)("input",{className:"hidden_input editProject-description btn-x",value:"Update",id:"editProject__description-btn",type:"button",onClick:function(){Object(b.w)(t.projectInfo.projectId,O)}})]})]})},U=function(e){var t=e.setIsEditProjectCard,r=e.setIsEditChannelCard,a=e.setIsEditMemberCard,n=e.setIsEditRequestCard,c=function(e){var c=e.target.id,s=document.querySelector("#navi-editProject"),i=document.querySelector("#navi-editChannel"),o=document.querySelector("#navi-editMember"),u=document.querySelector("#navi-RequestCard");s.classList.remove("focus"),i.classList.remove("focus"),o.classList.remove("focus"),u.classList.remove("focus"),"navi-editProject"===c?(s.classList.add("focus"),t(!0),r(!1),a(!1),n(!1)):"navi-editChannel"===c?(i.classList.add("focus"),t(!1),r(!0),a(!1),n(!1)):"navi-editMember"===c?(o.classList.add("focus"),t(!1),r(!1),a(!0),n(!1)):"navi-RequestCard"===c&&(u.classList.add("focus"),t(!1),r(!1),a(!1),n(!0))};return Object(h.jsxs)("div",{className:"editProjectNavigation-wrapper",children:[Object(h.jsx)("div",{className:"editProject-navi focus",id:"navi-editProject",onClick:c,children:Object(h.jsx)("span",{children:"Project"})}),Object(h.jsx)("div",{className:"editProject-navi",id:"navi-editChannel",onClick:c,children:Object(h.jsx)("span",{children:"Channels"})}),Object(h.jsx)("div",{className:"editProject-navi",id:"navi-editMember",onClick:c,children:Object(h.jsx)("span",{children:"Members"})}),Object(h.jsx)("div",{className:"editProject-navi",id:"navi-RequestCard",onClick:c,children:Object(h.jsx)("span",{children:"Request Messages"})})]})},R=function(e){var t=e.projectObj,r=e.userObj,n=Object(a.useState)(Array.from(t.requestUserList)),c=Object(j.a)(n,2),s=c[0],i=c[1],l=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,c,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target,c=n.value,s=n.name,"Permit"!==c){e.next=8;break}return e.next=4,Object(b.a)(t.projectInfo.projectId,s,r);case 4:u=e.sent,i(u),e.next=13;break;case 8:if("Refuse"!==c){e.next=13;break}return e.next=11,Object(b.p)(t.projectInfo.projectId,s);case 11:l=e.sent,i(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"editRequest-wrapper",children:s.length?Object(h.jsx)("ul",{className:"editRequestList-wrapper",children:s.map((function(e,t){return Object(h.jsxs)("li",{className:"requestMember-wrapper",children:[Object(h.jsx)("div",{className:"requestMember__marked"}),Object(h.jsx)("div",{className:"requestMember__index",children:t+1}),Object(h.jsxs)("div",{className:"requestMember-container",children:[Object(h.jsx)("div",{className:"requestMember__img-wrapper",children:Object(h.jsx)("img",{src:e.profileImg,alt:"img"})}),Object(h.jsxs)("div",{className:"requestMember__info-wrapper",children:[Object(h.jsx)("div",{className:"requestMember__info-name",children:e.userName}),Object(h.jsx)("div",{className:"requestMember__info-email",children:e.email})]})]}),Object(h.jsxs)("div",{className:"requestMember__check-wrapper",children:[Object(h.jsx)("input",{type:"button",value:"Permit",name:e.userId,onClick:l}),Object(h.jsx)("input",{type:"button",value:"Refuse",name:e.userId,onClick:l})]})]},e.userId)}))}):Object(h.jsx)("div",{className:"NoEditRequest-wrapper",children:"No Messages"})})},M=function(e){var t=e.projectObj,r=e.userObj,n=Object(a.useState)(!0),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!1),u=Object(j.a)(o,2),l=u[0],d=u[1],p=Object(a.useState)(!1),b=Object(j.a)(p,2),m=b[0],f=b[1],O=Object(a.useState)(!1),x=Object(j.a)(O,2),v=x[0],g=x[1];return Object(h.jsx)("div",{className:"editProjectInfo-container",children:Object(h.jsxs)("div",{className:"editProjectInfo-wrapper",children:[Object(h.jsx)(U,{setIsEditProjectCard:i,setIsEditChannelCard:d,setIsEditMemberCard:f,setIsEditRequestCard:g}),s&&Object(h.jsx)(E,{projectObj:t}),l&&Object(h.jsx)(S,{projectObj:t}),m&&Object(h.jsx)(q,{projectObj:t}),v&&Object(h.jsx)(R,{projectObj:t,userObj:r})]})})},A=function(e){var t=e.userObj,r=e.setUserObj,c=e.projectPath,s=e.chatroomPath,i=e.setChatroomPath,l=Object(a.useState)(null),d=Object(j.a)(l,2),p=d[0],m=d[1],f=Object(a.useRef)(null),O=Object(a.useState)(!1),x=Object(j.a)(O,2),v=x[0],g=x[1];return Object(a.useEffect)((function(){g(!1);var e=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.m)(t,m);case 2:r=e.sent,f.current=r;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();f.current&&(f.current(),f.current=null),e(c.id)}),[c]),Object(h.jsx)("div",{className:"project-container",children:p?Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(P,{userObj:t,setUserObj:r,projectPath:c,projectObj:p,setChatroomPath:i,setEditProjectInfo:g}),Object(h.jsx)(n.a.Fragment,{children:v?Object(h.jsx)(M,{projectObj:p,userObj:t}):Object(h.jsx)(n.a.Fragment,{children:s?Object(h.jsx)(y,{userObj:t,projectObj:p,projectPath:c,chatroomPath:s}):Object(h.jsx)(L,{userObj:t,setUserObj:r,projectPath:c,setChatroomPath:i})})})]}):Object(h.jsx)("div",{children:"Loading..."})})},D=r(37);var F=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),r=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),m=i[0],O=i[1],v=Object(a.useState)(""),g=Object(j.a)(v,2),N=g[0],w=g[1],I=Object(a.useState)(""),y=Object(j.a)(I,2),P=y[0],L=y[1],C=Object(a.useState)(null),S=Object(j.a)(C,2),q=S[0],E=S[1],U=Object(a.useState)(""),R=Object(j.a)(U,2),M=R[0],F=R[1],T=Object(a.useState)(null),B=Object(j.a)(T,2),J=B[0],z=B[1],W=function(e){var t=Object(a.useState)(null),r=Object(j.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)((function(){n&&setTimeout((function(){e(n),c(null)}),500)}),[n,e]),{createProjectName:n,setCreateProjectName:c}}(w),G=W.createProjectName,H=W.setCreateProjectName,Y=Object(a.useRef)(!1),K=Object(a.useRef)(!1),V=Object(a.useRef)(!1),Q=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=e.lastEditedProjectList,n=0;n<a.length;n++)if(a[n].projectPath.id===t){if(r){var c=String(r).split("==");a[n].chatroomPath={id:c[0],name:c[1]},z(Object(l.a)(Object(l.a)({},e),{},{lastEditedProjectList:a}))}return a[n]}return null};Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.A)(J);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();K.current?e():K.current=!0}),[J]);var Z=Object(a.useCallback)((function(){var e=decodeURI(window.location.hash);if(e!==M){var t="#/project/",r=e.indexOf(t);if(J)if(r)w(""),L("");else{var a=e.slice(t.length),n=a.indexOf("#");if(n+1){var c=a.slice(0,n),s=a.slice(n+1),i=Q(J,c,s);L(i.chatroomPath),w(i.projectPath)}else{var o=Q(J,a,"");L(o.chatroomPath),w(o.projectPath)}}else console.error("no user Obj")}F(e)}),[M,J]);return Object(a.useEffect)((function(){if(J){if(!V.current&&(Z(),V.current=!0,q))for(var e=0;e<Array.from(q).length;e++)alert("".concat(q[e]," \ud504\ub85c\uc81d\ud2b8\uc758 \ub9ac\ub354\uc5d0 \uc758\ud558\uc5ec \ub2f9\uc2e0\uc740 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uc81c\uc678\ub418\uc5c8\uc2b5\ub2c8\ub2e4"));window.addEventListener("hashchange",Z)}return function(){return window.removeEventListener("hashchange",Z)}}),[J,Z,q]),Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(o.a.mark((function e(){var t,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.n)();case 2:t=e.sent,r=t.reject,a=t.user,E(r),z(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Y.current?m&&e():(Object(b.o)({setInit:c,setIsLoggedIn:O}),Y.current=!0)}),[m,z]),Object(h.jsx)(n.a.Fragment,{children:r?Object(h.jsxs)(d.a,{children:[m&&J&&Object(h.jsx)(x,{userObj:J}),Object(h.jsx)(p.d,{children:Object(h.jsx)(n.a.Fragment,{children:m?Object(h.jsx)(n.a.Fragment,{children:J&&Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(p.b,{exact:!0,path:"/",children:Object(h.jsx)(p.a,{to:"/profile"})}),Object(h.jsx)(p.b,{exact:!0,path:"/project/:projectPathId",children:N&&Object(h.jsx)(A,{userObj:J,setUserObj:z,projectPath:N,chatroomPath:P,setChatroomPath:L})}),G?Object(h.jsx)(p.b,{exact:!0,path:"/project",children:Object(h.jsx)(p.a,{to:{pathname:"/project/".concat(G.id),state:{fromDashboard:!0}}})}):Object(h.jsx)(p.b,{exact:!0,path:"/project",children:Object(h.jsx)(D.a,{userObj:J,setUserObj:z,setCreateProjectName:H})}),Object(h.jsx)(p.b,{exact:!0,path:"/setting",children:Object(h.jsx)(k,{userObj:J,setUserObj:z})}),Object(h.jsx)(p.b,{exact:!0,path:"/profile",children:Object(h.jsx)(_,{userObj:J,setUserObj:z})})]})}):Object(h.jsx)("div",{id:"auth-container",children:Object(h.jsx)(p.b,{path:"/",children:Object(h.jsx)(f,{})})})})})]}):Object(h.jsxs)("div",{className:"initializing-div",children:[Object(h.jsx)("img",{src:"https://i.ytimg.com/vi/zwzPeHNp9Ms/maxresdefault.jpg",alt:"Initializing_Image",id:"initializing-img"}),Object(h.jsxs)("footer",{children:["\xa9 ",(new Date).getFullYear(),"JoinMates"]})]})})};r(59);s.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root"))},9:function(e,t,r){"use strict";r.d(t,"d",(function(){return b})),r.d(t,"s",(function(){return m})),r.d(t,"g",(function(){return x})),r.d(t,"f",(function(){return v})),r.d(t,"e",(function(){return g})),r.d(t,"n",(function(){return _})),r.d(t,"l",(function(){return k})),r.d(t,"o",(function(){return I})),r.d(t,"r",(function(){return y})),r.d(t,"h",(function(){return L})),r.d(t,"u",(function(){return C})),r.d(t,"t",(function(){return S})),r.d(t,"z",(function(){return q})),r.d(t,"B",(function(){return E})),r.d(t,"A",(function(){return F})),r.d(t,"m",(function(){return T})),r.d(t,"j",(function(){return B})),r.d(t,"k",(function(){return J})),r.d(t,"b",(function(){return z})),r.d(t,"c",(function(){return W})),r.d(t,"x",(function(){return U})),r.d(t,"y",(function(){return R})),r.d(t,"w",(function(){return M})),r.d(t,"v",(function(){return A})),r.d(t,"i",(function(){return D})),r.d(t,"a",(function(){return G})),r.d(t,"p",(function(){return Y})),r.d(t,"q",(function(){return K}));var a=r(6),n=r(10),c=r(3),s=r.n(c),i=r(4),o=r(22);r(45),r(61),r(62);o.a.initializeApp({apiKey:"AIzaSyBnYpARa9mL0BccgDKTkc7QZh1mkBQaO_4",authDomain:"joinmates-7701.firebaseapp.com",projectId:"joinmates-7701",storageBucket:"joinmates-7701.appspot.com",messagingSenderId:"930819837611",appId:"1:930819837611:web:c2a2b841768fb9dd2cf1ee",measurementId:"G-854M0KRVH2"});var u=o.a,l=o.a.auth(),j=o.a.firestore(),d=o.a.storage(),p=r(35),b=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c,i,o,u,j,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.newAccount,a=t.email,n=t.password,c=t.userName,i=void 0===c?"":c,e.prev=1,!r){e.next=15;break}return e.next=5,l.createUserWithEmailAndPassword(a,n);case 5:return o=e.sent,e.next=8,h(o,i);case 8:return u=e.sent,j=u.userObj,e.next=12,f(j);case 12:return e.abrupt("return",{data:j,error:null});case 15:return e.next=17,l.signInWithEmailAndPassword(a,n);case 17:return o=e.sent,e.abrupt("return",{data:null,error:null});case 19:e.next=41;break;case 21:if(e.prev=21,e.t0=e.catch(1),"auth/invalid-email"!==(d=e.t0.code)){e.next=28;break}return e.abrupt("return",{data:null,error:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4"});case 28:if("auth/user-disabled"!==d){e.next=32;break}return e.abrupt("return",{data:null,error:"\uc874\uc7ac\ud558\uc9c0 \uc54a\uac70\ub098 \uc798\ubabb\ub41c \uc774\uba54\uc77c\uc785\ub2c8\ub2e4"});case 32:if("auth/user-not-found"!==d){e.next=36;break}return e.abrupt("return",{data:null,error:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc720\uc800\uc785\ub2c8\ub2e4"});case 36:if("auth/wrong-password"!==d){e.next=40;break}return e.abrupt("return",{data:null,error:"\uc798\ubabb\ub41c \ube44\ubc00\ubc88\ud638 \uc785\ub2c8\ub2e4"});case 40:return e.abrupt("return",{data:null,error:e.t0.message});case 41:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"github"===t?r=new u.auth.GithubAuthProvider:"google"===t&&(r=new u.auth.GoogleAuthProvider),e.next=4,u.auth().signInWithPopup(r);case 4:return a=e.sent,e.next=7,h(a);case 7:if(n=e.sent,c=n.isNewAccount,i=n.userObj,!c){e.next=13;break}return e.next=13,f(i);case 13:return e.abrupt("return",{data:i,error:null});case 16:if(e.prev=16,e.t0=e.catch(0),"auth/account-exists-with-different-credential"!==(o=e.t0.code)){e.next=23;break}return e.abrupt("return",{data:null,error:"\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4"});case 23:if("auth/auth-domain-config-required"!==o){e.next=27;break}return e.abrupt("return",{data:null,error:"\ud5c8\uc6a9\ub418\uc9c0 \uc54a\ub294 \ub3c4\uba54\uc778 \uc8fc\uc18c\uc785\ub2c8\ub2e4"});case 27:if("cancelled-popup-request"!==o){e.next=31;break}return e.abrupt("return",{data:null,error:"\ud55c\ubc88\uc5d0 \ub108\ubb34 \ub9ce\uc740 \ud31d\uc5c5\uc774 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4\n\ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc2ed\uc2dc\uc624"});case 31:if("auth/operation-not-allowed"!==o){e.next=35;break}return e.abrupt("return",{data:null,error:"\ud574\ub2f9 \uc18c\uc15c\uc5d0 \ub9de\ub294 \uc774\uba54\uc77c\uc744 \uc0ac\uc6a9\ud574\uc8fc\uc2ed\uc2dc\uc624"});case 35:if("auth/operation-not-supported-in-this-environment"!==o){e.next=39;break}return e.abrupt("return",{data:null,error:"http \ub610\ub294 https\ub97c \uc81c\uc678\ud55c \ud504\ub85c\ud2b8\ucf5c\uc740 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"});case 39:if("auth/popup-blocked"!==o){e.next=43;break}return e.abrupt("return",{data:null,error:"\ud31d\uc5c5\uc744 \ud5c8\uc6a9\ud574 \uc8fc\uc2ed\uc2dc\uc624"});case 43:if("auth/popup-closed-by-user"!==o){e.next=47;break}return e.abrupt("return",{data:null,error:""});case 47:if("auth/unauthorized-domain"!==o){e.next=52;break}return console.error(e.t0.message),e.abrupt("return",{data:null,error:""});case 52:return e.abrupt("return",{data:null,error:e.t0.message});case 53:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c,i,o,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"set_your_name",a="https://firebasestorage.googleapis.com/v0/b/joinmates-7701.appspot.com/o/defaultProfileImg?alt=media&token=310ed0a4-3b48-41d3-9148-acfe6b028d00",n=Boolean(t.user.displayName)?t.user.displayName:r,c=Boolean(t.user.photoURL)?t.user.photoURL:a,!(i=t.additionalUserInfo.isNewUser)){e.next=10;break}return o={userName:n,userId:t.user.uid,email:t.user.email,emailVerified:t.user.emailVerified,photoURL:c,friends:[],projectList:[],lastEditedProjectList:[],requestMessages:[],setting:{seeProjectWithIcon:!1}},e.abrupt("return",{isNewAccount:i,userObj:o});case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("userList").doc(t.userId).set(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=d.ref().child("projectImg/".concat(t)),e.next=4,a.putString(r,"data_url");case 4:return n=e.sent,e.next=7,n.ref.getDownloadURL();case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c,i,o,u,l,d,b,m,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userObj,a=t.projectName,n=void 0===a?"project_name":a,c=t.projectImgDataURL,i=void 0===c?"":c,o=t.memberIdList,u=void 0===o?[]:o,l=t.description,d=void 0===l?"":l,b=Object(p.v4)(),!i){e.next=8;break}return e.next=5,O(b,i);case 5:m=e.sent,e.next=9;break;case 8:m="https://firebasestorage.googleapis.com/v0/b/joinmates-7701.appspot.com/o/defaultProjectImg.jpg?alt=media&token=f93b15f0-bd72-4b93-b031-9a5d4631cae9";case 9:return h={projectInfo:{projectName:n,projectId:b,projectImg:m},chatList:[],userInfo:u,leaderId:r.userId,description:d,createTime:String(Date.now()),requestUserList:[],lastChatId:"ch0"},e.next=12,j.collection("project").doc(b).set(h);case 12:return e.abrupt("return",h.projectInfo);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,c,i,o,u,l,d,p,b,m,h,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userObj,c=t.path,(i=void 0===c?null:c)||console.error("createChatroom Error : no path propoerty"),e.next=4,j.doc("project/".concat(i.projectPath.id)).get();case 4:o=e.sent.data(),u=o.chatList,l=!1,d=0;case 8:if(!(d<Array.from(u).length)){e.next=16;break}if(u[d].name!==i.chatroomPath.name){e.next=13;break}return alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ucc44\ub110 \uc774\ub984\uc785\ub2c8\ub2e4"),l=!0,e.abrupt("return");case 13:d++,e.next=8;break;case 16:if(l){e.next=30;break}return p=o.lastChatId,b=Number(String(p).slice(2))+1,m="ch".concat(b),h={id:m,name:i.chatroomPath.name},u=[].concat(Object(n.a)(u),[h]),e.next=24,j.doc("project/".concat(i.projectPath.id)).update(Object(a.a)(Object(a.a)({},o),{},{chatList:u,lastChatId:m}));case 24:return f={projectPath:i.projectPath,chatroomPath:h},e.next=27,g({path:f,userObj:r,chatType:"text",chat:"Congratulations! You just create a new chatRoom"});case 27:return e.abrupt("return","ch".concat(b));case 30:return e.abrupt("return");case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c,i,o,u,l,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.path,a=void 0===r?null:r,n=t.userObj,c=t.chatType,i=void 0===c?"text":c,o=t.chat,u=void 0===o?"":o,l=t.commitTo,void 0===l?null:l,a||console.error("createChat Error : no path propoerty"),n.userId||console.error("createChat Error : no createrId propoerty"),d=String(Date.now()),"img"!==i){e.next=8;break}return e.next=7,N(a,u,d);case 7:u=e.sent;case 8:return p={createrObj:{createrId:n.userId,createrName:n.userName,createrProfileImg:n.photoURL,createrEmail:n.email},chatType:i,doc:u,createTime:d,isEdited:!1,isCommit:!1},e.next=11,j.collection("project/".concat(a.projectPath.id,"/").concat(a.chatroomPath.id)).doc(d).set(p);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(s.a.mark((function e(t,r,a){var n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.ref().child("projectImg/".concat(t.projectPath.id,"/").concat(t.chatroomPath.id,"/").concat(a)),e.next=3,n.putString(r,"data_url");case 3:return c=e.sent,e.next=6,c.ref.getDownloadURL();case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.ref().child("profileImg/".concat(t.userId)),e.next=3,a.putString(r,"data_url");case 3:return n=e.sent,e.next=6,n.ref.getDownloadURL();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(s.a.mark((function e(){var t,r,c,o,u,d,p,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.currentUser.uid,e.next=3,j.collection("userList").doc(t).get();case 3:return r=e.sent.data(),c=Array.from(r.projectList).map((function(e){return e.projectId})),e.next=7,Promise.all(c.map(function(){var e=Object(i.a)(s.a.mark((function e(r){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(r)).get();case 2:if(a=e.sent.data(),!(Array.from(a.userInfo).indexOf(t)+1)){e.next=10;break}return n="",Array.from(a.chatList).length&&(n=a.chatList[0]),e.abrupt("return",{projectInfo:a.projectInfo,lastEditedProject:{chatroomPath:n,projectPath:{id:a.projectInfo.projectId,name:a.projectInfo.projectName}},reject:!1});case 10:return e.abrupt("return",{projectInfo:a.projectInfo.projectName,lastEditedProject:null,reject:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:for(o=e.sent,u=[],d=[],p=[],b=0;b<o.length;b++)o[b].reject?d=[].concat(Object(n.a)(d),[o[b].projectInfo]):(u=[].concat(Object(n.a)(u),[o[b].projectInfo]),p=[].concat(Object(n.a)(p),[o[b].lastEditedProject]));return e.abrupt("return",{reject:d,user:Object(a.a)(Object(a.a)({},r),{},{lastEditedProjectList:p,projectList:u})});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t=e.path,r=e.setFunc,n=e.limit,c=void 0===n?10:n;return j.collection("project/".concat(t.projectPath.id,"/").concat(t.chatroomPath.id)).orderBy("createTime","asc").limitToLast(c).onSnapshot(function(){var e=Object(i.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.docs.map(function(){var e=Object(i.a)(s.a.mark((function e(r){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.data()).isCommit){e.next=8;break}return e.next=4,j.collection("project/".concat(t.projectPath.id,"/").concat(t.chatroomPath.id)).doc(n.commitToId).get();case 4:return c=e.sent.data(),e.abrupt("return",Object(a.a)(Object(a.a)({},n),{},{commitToObj:c}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:c=e.sent,r(Array.from(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},I=function(e){var t=e.setInit,r=e.setIsLoggedIn;l.onAuthStateChanged((function(e){r(!!e),t(!0)}))},y=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t||window.prompt("\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"))){e.next=13;break}return e.prev=2,a=l.currentUser,n=u.auth.EmailAuthProvider.credential(a.email,r),e.abrupt("return",{user:a,credential:n,error:null});case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{user:null,credential:null,error:"wrong password"});case 11:e.next=14;break;case 13:return e.abrupt("return",{user:null,credential:null,error:"confirm fail: user cancel the confirm alert"});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(s.a.mark((function e(){var t,r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(t=e.sent,r=t.user,a=t.credential,!(n=t.error)){e.next=9;break}return alert(n),e.abrupt("return");case 9:return e.next=11,r.reauthenticateWithCredential(a).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("userList").doc(r.uid).delete();case 2:return e.next=4,l.currentUser.delete().then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("userList").doc(r.uid).delete();case 2:case"end":return e.stop()}}),e)}))),(function(){alert(n.message)}));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){alert(e.message)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a,n,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return a=e.sent,n=a.user,c=a.credential,(o=a.error)&&alert(o),e.next=9,n.reauthenticateWithCredential(c).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.updatePassword(r).then((function(){alert("Sucessfully change password")}),(function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert(e.message)}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a,n,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(r);case 2:return a=e.sent,n=a.user,c=a.credential,(o=a.error)&&alert(o),e.next=9,n.reauthenticateWithCredential(c).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.updateEmail(t).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Sucessfully change email");case 1:case"end":return e.stop()}}),e)}))),(function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert(e.message)}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.currentUser.updateProfile({displayName:t}).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Sucessfully change user name");case 1:case"end":return e.stop()}}),e)}))),(function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,r);case 2:return a=e.sent,e.next=5,l.currentUser.updateProfile({photoURL:a}).then(Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("Sucessfully change profile image");case 1:case"end":return e.stop()}}),e)}))),(function(e){alert(e.message)}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return n=e.sent.data(),c=n.projectInfo,e.next=6,O(t,r);case 6:if(!(i=e.sent)){e.next=15;break}return c.projectImg=i,e.next=11,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},n),{},{projectInfo:c}));case 11:return alert("Sucessfully change project image"),e.abrupt("return",i);case 15:alert("Error: can't upload project image");case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return n=e.sent.data(),(c=n.projectInfo).projectName=r,e.next=7,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},n),{},{projectInfo:c}));case 7:alert("Sucessfully change project name");case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return n=e.sent.data(),e.next=5,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},n),{},{description:r}));case 5:alert("Sucessfully change project description");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return n=e.sent.data(),e.next=5,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},n),{},{chatList:r}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(s.a.mark((function e(t,r,c){var o,u,l,d,p,b,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:for(o=e.sent.data(),u=Array.from(o.chatList),l=[],d=[],p=0;p<u.length;p++){for(b=!1,m=0;m<Array.from(r).length;m++)u[p].name===r[m]&&(b=!0);b?d=[].concat(Object(n.a)(d),[u[p].id]):l=[].concat(Object(n.a)(l),[u[p]])}return e.next=9,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},o),{},{chatList:l}));case 9:return j.collection("haveToDelete").doc("chatList").get().then(function(){var e=Object(i.a)(s.a.mark((function e(r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.exists){e.next=7;break}return a=r.data().chatList,a=[].concat(Object(n.a)(Array.from(a)),[{projectId:t,deleteList:d}]),e.next=5,j.collection("haveToDelete").doc("chatList").update({chatList:a});case 5:e.next=9;break;case 7:return e.next=9,j.collection("haveToDelete").doc("chatList").set({chatList:[{projectId:t,deleteList:d}]});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error getting document:",e)})),c(!0),e.abrupt("return",Array.from(l));case 13:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.userId){e.next=4;break}return e.next=4,j.collection("userList").doc(t.userId).update(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(t),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,c=j.collection("project").doc(t).onSnapshot(function(){var e=Object(i.a)(s.a.mark((function e(t){var c,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.data(),o=c.userInfo,e.next=4,Promise.all(o.map(function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("userList").doc(t).get();case 2:return r=e.sent.data(),e.abrupt("return",{name:r.userName,userId:r.userId,profileImg:r.photoURL,email:r.email});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:u=e.sent,n=Object(a.a)(Object(a.a)({},c),{},{userObjList:u}),r(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("project").get();case 2:return r=e.sent,e.next=5,Promise.all(r.docs.map(function(){var e=Object(i.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=r.data()).projectInfo.projectName!==t){e.next=9;break}return e.next=4,j.doc("userList/".concat(a.leaderId)).get();case 4:return n=e.sent.data(),c={name:n.userName,id:n.userId,email:n.email,profileImg:n.photoURL},e.abrupt("return",{id:a.projectInfo.projectId,name:a.projectInfo.projectName,projectImg:a.projectInfo.projectImg,leader:c,createTime:a.createTime,description:a.description});case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:for(a=e.sent,n=[],c=0;c<a.length;c++)a[c]&&n.push(a[c]);if(!n.length){e.next=12;break}return e.abrupt("return",n);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("userList").get();case 2:return r=e.sent,e.next=5,Promise.all(r.docs.map(function(){var e=Object(i.a)(s.a.mark((function e(r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=r.data()).email!==t){e.next=5;break}return e.abrupt("return",{email:a.email,name:a.userName,userId:a.userId,profileImg:a.photoURL});case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=e.sent,n=0;case 7:if(!(n<a.length)){e.next=13;break}if(!a[n]){e.next=10;break}return e.abrupt("return",a[n]);case 10:n++,e.next=7;break;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var a,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return a=e.sent.data(),c=Array.from(a.requestUserList),i=[].concat(Object(n.a)(c),[{userId:r.userId,userName:r.userName,profileImg:r.photoURL,email:r.email}]),a.requestUserList=i,console.log(a),e.next=9,j.doc("project/".concat(t)).update(a);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var c,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:return c=e.sent.data(),i=[].concat(Object(n.a)(c.userInfo),[r]),e.next=6,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},c),{},{userInfo:i}));case 6:return o="",Array.from(c.chatList).length&&(o=c.chatList[0]),e.abrupt("return",{projectInfo:c.projectInfo,chatroom:o});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(s.a.mark((function e(t,r,c){var i,o,u,l,d,p,b,m,h,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:for(i=e.sent.data(),o=Array.from(i.requestUserList),u=[],l=0;l<o.length;l++)o[l].userId!==r&&(u=[].concat(Object(n.a)(u),[o[l]]));return e.next=8,j.collection("userList").doc(r).get();case 8:if(d=e.sent.data(),p=Array.from(d.requestMessages),b=!0,!p.length){e.next=23;break}m=0;case 13:if(!p.length){e.next=23;break}if(h=p[m],f=h.projectId,h.projectId!==f){e.next=20;break}return h.state="resolve",b=!1,e.abrupt("break",23);case 20:m++,e.next=13;break;case 23:if(console.log(b),console.log(c),console.log(r),!b){e.next=31;break}return e.next=29,H(i.projectInfo,c,r);case 29:e.next=33;break;case 31:return e.next=33,j.collection("userList").doc(r).update(Object(a.a)(Object(a.a)({},d),{},{requestMessages:p}));case 33:return e.next=35,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},i),{},{requestUserList:u}));case 35:return e.abrupt("return",u);case 36:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(s.a.mark((function e(t,r,a){var c,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={leader:{email:r.email,id:r.userId,name:r.userName,profileImg:r.photoURL},projectImg:t.projectImg,projectId:t.projectId,projectName:t.projectName,requestDate:Date.now(),state:"request"},e.next=3,j.collection("userList").doc(a).get();case 3:return i=e.sent.data(),o=[].concat(Object(n.a)(i.requestMessages),[c]),i.requestMessages=o,console.log(o),console.log(i),e.next=10,j.collection("userList").doc(a).update(i);case 10:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(s.a.mark((function e(t,r){var c,i,o,u,l,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.doc("project/".concat(t)).get();case 2:for(c=e.sent.data(),i=Array.from(c.requestUserList),o=[],u=0;u<i.length;u++)i[u].userId!==r&&(o=[].concat(Object(n.a)(o),[i[u]]));return e.next=8,j.collection("userList").doc(r).get();case 8:l=e.sent.data(),d=Array.from(l.requestMessages),p=0;case 11:if(!d.length){e.next=18;break}if(d[p].projectId!==t){e.next=15;break}return d[p].state="reject",e.abrupt("break",18);case 15:p++,e.next=11;break;case 18:return e.next=20,j.collection("userList").doc(r).update(Object(a.a)(Object(a.a)({},l),{},{requestMessages:d}));case 20:return e.next=22,j.doc("project/".concat(t)).update(Object(a.a)(Object(a.a)({},c),{},{requestUserList:o}));case 22:return e.abrupt("return",o);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(s.a.mark((function e(t,r,a){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={leader:{email:t.email,id:t.userId,name:t.userName,profileImg:t.photoURL},projectImg:a.projectImg,projectId:a.projectId,projectName:a.projectName,requestDate:Date.now(),state:"request"},console.log(c),console.log(r),e.next=5,Promise.all(Array.from(r).map(function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.userId,e.next=3,j.collection("userList").doc(r).get();case 3:return a=e.sent.data(),console.log(a),i=[].concat(Object(n.a)(a.requestMessages),[c]),a.requestMessages=i,console.log(i),console.log(a),e.next=11,j.collection("userList").doc(r).update(a);case 11:return e.abrupt("return","done");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}()}},[[60,1,2]]]);
//# sourceMappingURL=main.bc1b5e69.chunk.js.map